(function () { tinymce.PluginManager.requireLangPack('cfHtmlSnippet'); tinymce.create('tinymce.plugins.cfHtmlSnippetPlugin', { init: function (ed, url) { ed.addCommand('mcecfHtmlSnippet', function () { ed.windowManager.open({ file: url + '/cfHtmlSnippet.htm', width: 320 + parseInt(ed.getLang('example.delta_width', 0)), height: 120 + parseInt(ed.getLang('example.delta_height', 0)), inline: 1 }, { plugin_url: url, some_custom_arg: 'custom arg' }) }); ed.addButton('cfHtmlSnippet', { title: 'cfHtmlSnippet.desc', cmd: 'mcecfHtmlSnippet', image: url + '/img/cfhtmlsnippet.gif' }); ed.onNodeChange.add(function (ed, cm, n) { var active = false; if (n.nodeName == 'IMG') { try { var src = n.attributes["src"].value; var alt = n.attributes["alt"].value; var regexRes = src.match("vi/([^&#]*)/0.jpg"); active = regexRes[1] === alt } catch (err) { } } cm.setActive('cfHtmlSnippet', active) }) }, createControl: function (n, cm) { return null }, getInfo: function () { return { longname: 'cfHtmlSnippet plugin', author: 'cellfex.com', authorurl: 'http://cellfex.com', infourl: 'http://cellfex.com/blog', version: "1.0"} } }); tinymce.PluginManager.add('cfHtmlSnippet', tinymce.plugins.cfHtmlSnippetPlugin) })();